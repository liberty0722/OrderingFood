<!-- pages/cart/cart.wxml -->
<view class="cart-page">
  <!-- è´­ç‰©è½¦ä¸ºç©º -->
  <view wx:if="{{totalCount === 0}}" class="empty-state">
    <text class="empty-icon">ğŸ›’</text>
    <text class="empty-text">è´­ç‰©è½¦ç©ºç©ºå¦‚ä¹Ÿ</text>
    <view class="empty-btn" bindtap="onGoOrder">å»ç‚¹é¤</view>
  </view>

  <!-- è´­ç‰©è½¦åˆ—è¡¨ -->
  <view wx:else class="cart-content">
    <view class="cart-header">
      <text class="cart-header-title">å·²é€‰å•†å“ ({{totalCount}}ä»¶)</text>
      <view class="cart-header-clear" bindtap="onClearCart">
        <text>ğŸ—‘ï¸ æ¸…ç©º</text>
      </view>
    </view>

    <scroll-view class="cart-list" scroll-y enhanced show-scrollbar="{{false}}">
      <view wx:for="{{cart}}" wx:key="id" class="cart-item {{item.isCustom ? 'cart-item-custom' : ''}}">
        <view class="cart-item-img" style="{{item.isCustom ? 'background: linear-gradient(135deg, #E8F5E9, #A5D6A7);' : ''}}">
          <text class="cart-item-emoji">{{item.isCustom ? 'âœï¸' : 'ğŸ½ï¸'}}</text>
        </view>
        <view class="cart-item-info">
          <text class="cart-item-name">{{item.name}}</text>
          <view class="cart-item-bottom">
            <text class="cart-item-price">Â¥{{item.price}}</text>
            <view class="cart-item-controls">
              <view class="reduce-btn" data-id="{{item.id}}" catchtap="onReduceItem">
                <text>âˆ’</text>
              </view>
              <text class="item-count">{{item.count}}</text>
              <view class="add-btn" data-item="{{item}}" catchtap="onAddItem">
                <text>+</text>
              </view>
            </view>
          </view>
          <text class="cart-item-subtotal">å°è®¡ï¼šÂ¥{{item.price * item.count}}</text>
        </view>
      </view>
      <view style="height: 200rpx;"></view>
    </scroll-view>

    <!-- åº•éƒ¨ç»“ç®—æ  -->
    <view class="checkout-bar">
      <view class="checkout-info">
        <text class="checkout-label">åˆè®¡ï¼š</text>
        <text class="checkout-price">Â¥{{totalPrice}}</text>
      </view>
      <view class="checkout-btn" bindtap="onGoCheckout">å»ç»“ç®—</view>
    </view>
  </view>
</view>
