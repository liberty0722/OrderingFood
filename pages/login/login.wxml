<!--pages/login/login.wxml-->
<view class="login-container">
  <!-- 角色切换 -->
  <view class="role-switch">
    <view
      class="role-item {{customerLogin ? 'active' : ''}}"
      data-role="customer"
      bindtap="onSwitchRole">
      顾客
    </view>
    <view
      class="role-item {{!customerLogin ? 'active' : ''}}"
      data-role="merchant"
      bindtap="onSwitchRole">
      商家
    </view>
  </view>

  <!-- 顾客登录 -->
  <view wx:if="{{customerLogin}}" class="login-content">
    <view class="title">顾客登录</view>
    <view class="desc">请完善您的头像和昵称</view>

    <!-- 头像选择 -->
    <view class="avatar-section">
      <button
        class="avatar-btn"
        open-type="chooseAvatar"
        bind:chooseavatar="onChooseAvatar">
        <image class="avatar-preview" src="{{avatarUrl}}" mode="aspectFill"></image>
        <view class="avatar-hint">点击更换头像</view>
      </button>
    </view>

    <!-- 昵称输入 -->
    <view class="nickname-section">
      <input
        class="nickname-input"
        type="nickname"
        placeholder="请输入您的昵称"
        value="{{nickName}}"
        bindinput="onNicknameInput"/>
    </view>

    <!-- 登录按钮 -->
    <button
      class="login-btn customer-btn"
      bindtap="onCustomerLoginConfirm"
      loading="{{loading}}">
      确认登录
    </button>
  </view>

  <!-- 商家登录 -->
  <view wx:else class="login-content">
    <view class="avatar-box">
      <image class="avatar" src="https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0" mode="aspectFit"></image>
    </view>
    <view class="title">商家登录</view>
    <view class="desc">请输入商家密码进入管理后台</view>
    <view class="input-group">
      <input
        class="password-input"
        type="password"
        placeholder="请输入商家密码"
        bindinput="onPasswordInput"
        value="{{password}}"
      />
    </view>
    <button
      class="login-btn merchant-btn"
      bindtap="onMerchantLogin"
      loading="{{loading}}">
      登录
    </button>
  </view>

  <!-- 底部提示 -->
  <view class="footer">
    <text class="footer-text">登录即表示同意《用户协议》和《隐私政策》</text>
  </view>
</view>
